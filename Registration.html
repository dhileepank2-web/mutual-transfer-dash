<!DOCTYPE html>
<html>
<head>
    <title>Register - Mutual Transfer</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f7f6; }
        .form-card { max-width: 500px; margin: auto; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; }
        .btn-otp { background: #ff9800; color: white; border: none; padding: 10px; cursor: pointer; width: 100%; border-radius: 5px; }
        .hidden { display: none; }
        .btn-submit { background: #28a745; color: white; border: none; padding: 15px; width: 100%; border-radius: 5px; margin-top: 10px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="form-card">
        <h2>New Registration</h2>
        <input type="text" id="name" placeholder="Full Name" required>
        
        <select id="designation" onchange="toggleOther(this.value)">
            <option value="">--Select Designation--</option>
            <option value="Typist">Typist</option>
            <option value="Junior Assistant">Junior Assistant</option>
            <option value="Steno Typist">Steno Typist</option>
            <option value="Other">Other</option>
        </select>
        <input type="text" id="otherDesignation" class="hidden" placeholder="Enter specific designation">

        <select id="workingDistrict"><option>Loading Districts...</option></select>
        <select id="willingDistrict"><option>Loading Districts...</option></select>
        
        <input type="tel" id="phone" placeholder="Contact Number (10 Digits)">
        <input type="email" id="email" placeholder="Email Address">
        
        <button type="button" class="btn-otp" id="otpRequestBtn" onclick="requestOTP()">1. Send OTP to Email</button>
        
        <div id="otpSection" class="hidden">
            <input type="text" id="otpInput" placeholder="Enter 4-Digit OTP">
            <button type="button" class="btn-submit" onclick="finalSubmit()">2. Verify & Register</button>
        </div>
    </div>

    <script>
        const WEB_APP_URL = "YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL";

        // Load Districts from your Sheet via script
        window.onload = () => {
            fetch(`${WEB_APP_URL}?action=getDistricts`)
            .then(res => res.json())
            .then(data => {
                const options = data.map(d => `<option value="${d}">${d}</option>`).join('');
                document.getElementById('workingDistrict').innerHTML = options;
                document.getElementById('willingDistrict').innerHTML = options;
            });
        };

        function toggleOther(val) {
            document.getElementById('otherDesignation').classList.toggle('hidden', val !== 'Other');
        }

        function requestOTP() {
            const email = document.getElementById('email').value;
            // Logic to call Google Apps Script to send OTP
            alert("Checking email and sending OTP...");
            document.getElementById('otpSection').classList.remove('hidden');
        }
        
        function finalSubmit() {
            // Logic to call registerUser in Apps Script
            alert("Processing registration...");
        }
    </script>
</body>
</html>
